<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <meta name="format-detection" content="telephone=no"/>
    <meta name="msapplication-tap-highlight" content="no"/>
    <title>斗地主</title>
    <link rel="stylesheet" href="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/css/landlord.css">
    <link rel="stylesheet" href="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/css/alert.css">
    <link rel="stylesheet" type="text/css" href="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/css/ncomm.css">
    <link rel="stylesheet" type="text/css" href="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/css/alertbox.css">
    <link rel="stylesheet" type="text/css" href="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/css/landlord_two.css">
    <script type="text/javascript" src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/js/fastclick.js"></script>
    <script type="text/javascript" src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/js/clipboard.min.js"></script>
    <script type="text/javascript" src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/fiesc/js/aes.js"></script>
    <script type="text/javascript" src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/js/md5.js"></script>
	<script type="text/javascript">
	    document.write('<script type="text/javascript" src="./js/config.js?v='+ new Date().getTime() +'"> <\/script>');
	    document.write('<script type="text/javascript" src="./js/load.js?v='+ new Date().getTime() +'"> <\/script>');
	    //var vConsole = new VConsole();
	    //var vConsole = new window.VConsole();
	</script>

    <script>
        document.documentElement.style.fontSize = document.documentElement.clientWidth / 360 * 100 + 'px';
        window.addEventListener('load', function () {
            FastClick.attach(document.body);
        }, false);
		
		var room_number = DynLoading.getUrlParam("i").replace("_", "");
		var obj = DynLoading.hall(BaseUrl + '/home1/room' + "?i=" + room_number + "_");
		if(obj.result != 0){
		    alert(obj.result_message);
		    var return_url = window.location.href;
		    console.log(return_url);
			window.location.href = '/index.html?return_url=' + return_url + '&t=' + obj.data.t;
		}
        var newNum = "";
        var per = window.innerWidth / 530;
        room_number = obj.data.room_number;
        var globalData = {
            "card":  obj.data.card,
            "roomNumber": room_number,
            "socket": obj.data.socket,
            "hallPath": "/index.html",
            "baseUrl" : BaseUrl + "/",
            "roomUrl":window.location.href,
            "fileUrl": obj.data.fileUrl,
            "cfileUrl": obj.data.cfileUrl,
            "isWechat":  obj.data.is_weixin,
            "isXianliao": obj.data.is_xianliao,
          "hallName": obj.data.platfrom_name,
            "xlTitle":"(房间号:" + room_number + ")",
            "roomStatus": obj.data.room_status,
            "room_status":obj.data.room_status,
            "balanceScoreboard":obj.data.balance_scoreboard,
            "session": obj.data.session,
            "shareTitle": obj.data.platfrom_name + "：(房间:" + room_number + ")",
            "gameType":obj.data.game_type,
        };
        globalData.wid = obj.data.wid; globalData.tt = obj.data.tt;
        var userData = {
            "accountId": obj.data.user.account_id,
            "nickname": obj.data.user.nickname,
            "avatar": obj.data.user.headimgurl,
            "individuality": obj.data.user.individuality,
        };
        var configData = {
            "appId":obj.data.config_ary.appId,
            "timestamp": obj.data.config_ary.timestamp,
            "nonceStr":obj.data.config_ary.nonceStr,
            "signature":obj.data.config_ary.signature,
        };
        console.log(userData)
		// 修改浏览器title
		var new_userName = "";
		var old_userNname = obj.data.user.nickname;
		if (old_userNname.length > 8) {
			new_userName = old_userNname.substring(0, 7);
			new_userName += "..."
		}
		else {
			new_userName = old_userNname;
		}
		document.getElementsByTagName("title")[0].innerText = new_userName + "|" + globalData.hallName;
        document.addEventListener('WeixinJSBridgeReady', function onBridgeReady() {
            // 通过下面这个API隐藏右上角按钮
            WeixinJSBridge.call('hideOptionMenu');
        });
    </script>
</head>

<body id="body">

<style type="text/css">
    body.modal-show {
        position: fixed;
        width: 100%;
    }
</style>

<div id="dialog" style="display:none">
    <img src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/common/cancel.png" onclick="fuzhiMain.closeDialog()">
    <p id="main" class="main">
    </p>
    <p class="other">
        请手动复制
    </p>
</div>

<span class="copy-tip" id="tips" style="display:none">已复制到剪贴板</span>
<img src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/common/33fz.png" class="needsclick zhuonuo copyUrl" data-clipboard-action="copy" id="copy_btn" onclick="fuzhiMain.link()"/>
<textarea id="room_str" readonly="readonly"></textarea>

<!-- loading -->
<div style="position: fixed;width:100%;height:100%;top:0;left:0;background: #000;z-index: 139;" id="loading">
    <div class="load4">
        <div class="loader">Loading...</div>
    </div>
</div>

<div class="main" id="app-main" style="display: none;">
    <div class="window-masks return-index" id="returnIndex" v-show="isShowHomeAlert">
        <div class="border-opacity">
            <div class="container f-cb"><i class="mask-icon mask-top"></i><i class="mask-icon mask-right"></i><i
                        class="mask-icon mask-bottom"></i><i class="mask-icon mask-left"></i>
                <div class="main">确认返回主页？</div>
                <div class="button">
                    <div class="sure" id="returnIndexBtn" v-on:click="hall">返回首页</div>
                    <div class="cancel" id="cancelBtn" v-on:click="closeHomeAlert">取消</div>
                </div>
            </div>
        </div>
    </div>
    <!-- 特殊提示  -->
    <div class="alert" v-show="isShowNoteImg" v-on:click="hideNoteImg()">
        <div class="alertBack"></div>
        <img src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/guest/back.png"
             style="position: absolute; top: 1rem; width: 3rem; height: 3rem; left: .3rem;">
        <img src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/guest/xieyi.png"
             style="position: absolute; top: .8rem; width: 2rem; height: .7rem; left: .7rem;">
        <img src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/guest/cancel2.png"
             style="position: absolute; top: .8rem; width: .8rem; height: .8rem; right: .15rem;">
        <div style="position: absolute; top: .8rem; left: .03rem; color:#fff; font-size: 14px!important; padding: .65rem; opacity: .7;">
            <p>
                &emsp;&emsp;本游戏仅供娱乐，禁止赌博。如发现有赌博 行为，将封停帐号并向公安机关举报。
            </p><br>
            <p>
                &emsp;&emsp;游戏中使用的房卡为游戏道具，不具有任何 财产性功能。本公司对于用户的房卡不提供任何 形式官方回购，直接成交兑换现金或实物等服务 相关功能，游戏仅供休闲娱乐使用，游戏中出现
                问题请联系客服。
            </p>
        </div>
    </div>
    <!-- 背景图片 -->
    <img class="tableBack" style="top: 0;left: 0;width: 100vw;height: 100vh;"
         src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/fzfz67/files/images/landlord/table.jpg"/>

    <!-- 我的门票 -->
    <div class="roomCard" v-on:click="showIndividuality">
        <img src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/common/myText.png"/>
        <div class="num">
            <div class="back"></div>
            <div class="text">{{userData.individuality}}<span v-if='userData.individuality==""'>点击设置</span></div>
        </div>
    </div>
    <div style="display: none;" v-show="isShowIndividuality==1">
        <div class="individuaMask" style="" v-on:click="hideIndividuality"></div>
        <div class="individuaFrame" style="">
            <div class="title">防伪码设置</div>
            <div class="text">
                <input v-model="individuality" v-on:input="individualityChange()" type="text"
                       placeholder="设置1-6位英文或数字防伪码">
            </div>
            <div class="error">{{individualityError}}</div>
            <div class="buttonContainer" v-on:click="setIndividuality">
                <div class="button">确认</div>
            </div>
            <div class="buttonClose" v-on:click="hideIndividuality">
                <img src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/common/close.png">
            </div>
        </div>
    </div>
	<!--
    <img class="landlordTitle" style="top: 40vh;left: 50vw;" src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/landlord/table_title.png"/>
	-->
    <div class="disconnect" v-show="!connectOrNot"
         style="position: fixed;top:45%;left: 0;width: 100%;text-align: center;z-index: 101">
        <div style="width: 250px;height:27px;position: absolute;top:-2;left: 50%;margin-left: -125px;background: #000;opacity: .5;border-radius:15px;">
        </div>
        <a style="font-size: 16px;color: #fff;padding: 5px 14px;position:relative;">已断开连接，正在重新连接...</a>
    </div>

    <!-- footer -->
    <div class="bottom">
        <img class="bottomBack" src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/landlord/footer.png"/>
        <img class="bottomButton bottomGameMessage" src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/common/icon_message.png"
             v-on:click="showMessage">
        <div class="mine">
            <img v-bind:src="player[0].headimgurl" v-show="player[0].account_status!=4&&player[0].account_status!=5"/>
            <img src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/landlord/avatar_farmer1.png"
                 v-show="player[0].account_status==4"/>
            <img src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/landlord/avatar_landlord1.png"
                 v-show="player[0].account_status==5"/>
            <div class="name">{{player[0].nickname}}</div>
            <div class="score">{{player[0].account_score}}</div>
        </div>
    </div>

    <!--自动准备-->
    <div class="auto-ready" v-on:click="autoReady()">
        <img v-show="appData.isAutoReady==1" src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/common/ready_true2.png">
        <img v-show="appData.isAutoReady==0" src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/common/ready_false2.png">
    </div>

    <img class="bottomButton bottomGameRule" src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/common/icon_rule.png"
         v-on:click="showRull">
    <img class="bottomButton bottomGameHistory" src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/common/icon_sound.png"
         v-on:click="showAudioSetting">
    <img class="bottomButton bottomGameRule" style="right: 30vh;"
         src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/common/icon_home3.png" v-on:click="showHomeAlert()"/>

    <div v-show="cardNumShow>0" class="cardsTurnBack"></div>

    <!-- 桌子 -->
    <div class="table" v-on:click="confirmAudioSetting('1')">

        <!-- 地主牌 -->
        <div class="round">
            <div class="playRound">{{game.round}}&nbsp/&nbsp{{game.total_num}}&nbsp局</div>
            <div class="cardOver" v-show="game.landlord_card.length>0">
                <div class="cards card0">
                    <div class="face front"></div>
                    <div class="face back" v-bind:class="'card' + game.landlord_card[0]"></div>
                </div>
                <div class="cards card1">
                    <div class="face front"></div>
                    <div class="face back" v-bind:class="'card' + game.landlord_card[1]"></div>
                </div>
                <div class="cards card2">
                    <div class="face front"></div>
                    <div class="face back" v-bind:class="'card' + game.landlord_card[2]"></div>
                </div>

            </div>
            <div class="magnification" v-show="game.landlord_card.length>0">{{rullInfo.base_score}}X{{game.multiple}}
            </div>
        </div>

        <div class="restPart" v-on:click="cardsDown"></div>

        <!-- 玩家  -->
        <div v-for="p in player" class="member" v-bind:class="'member' + p.num" v-if="p.account_id>0&&p.num!=1">

            <!-- 玩家信息 -->
            <div class="memberInfo">
                <img v-bind:src="p.headimgurl" v-show="p.account_status!=4&&p.account_status!=5"/>
                <img src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/landlord/avatar_farmer1.png"
                     v-if="p.account_status==4&&p.num==3"/>
                <img src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/landlord/avatar_landlord1.png"
                     v-if="p.account_status==5&&p.num==3"/>
                <img src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/landlord/avatar_farmer2.png"
                     v-if="p.account_status==4&&p.num==2"/>
                <img src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/landlord/avatar_landlord2.png"
                     v-if="p.account_status==5&&p.num==2"/>

                <div class="quitBack" v-show="p.account_status>0&&p.online_status==0"></div>
                <div class="text">
                    <div class="back"></div>
                    <div class="name">{{p.nickname}}</div>
                    <div class="score">{{p.account_score}}</div>
                </div>
            </div>

            <!-- 玩家牌数 -->
            <div class="cardsNum" v-show="p.cardsNum>0&&p.account_status!=6">
                <img src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/common/card1.png"/>
                <div class="text">{{p.cardsNum}}</div>
            </div>

            <!-- 准备 -->
            <img src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/common/ready_text.png" class="imReady"
                 v-show="p.account_status==2&&game.round==0"/>

            <!-- 倒计时 -->
            <div class="clock" v-show="p.playing_status==2||p.playing_status==3">
                {{p.limit_time}}
            </div>

            <div class="cardShow"
                 v-show="p.tempCards.length>0&&((p.playing_status==1&&p.tempCards[0]!=0&&p.account_status!=6)||p.cardsNum==0)">
                <div v-for="(t,index) in p.tempCards" class="card" v-bind:class="'card' + t" v-if="index<7"></div>
                <div v-for="(t,index) in p.tempCards" class="card" v-bind:class="'card' + t" v-if="index>6&&index<14"
                     style="margin-top: -14px;"></div>
                <div v-for="(t,index) in p.tempCards" class="card" v-bind:class="'card' + t" v-if="index>13"
                     style="margin-top: -14px;"></div>
                <img v-bind:src="globalData.fileUrl + 'commonxmz67/files/images/landlord/feiji' + p.num + '.png'" class="feiji"
                     v-bind:class="'feiji' + p.num"/>
            </div>

            <!-- 不要 -->
            <div class="cardPass" v-show="p.tempCards.length==0&&p.playing_status==1&&p.account_status!=6">
                <img src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/landlord/text_buyao.png"/>
            </div>


            <div class="cardShow" v-show="p.account_status==6&&p.cardsNum>0">
                <div style="height:30px;width:126px;float: left;">
                    <div v-for="(t,index) in p.cards" v-bind:class="'card card' + t + '  row1'" v-if="index<7"
                         style="margin-left: -36px;"></div>
                </div>
                <div style="height:30px;width:126px;float: left;">
                    <div v-for="(t,index) in p.cards" v-bind:class="'card card' + t + ' row2'" v-if="index>6&&index<14"
                         style="margin-left: -36px;"></div>
                </div>
                <div style="width:126px;float: left;">
                    <div v-for="(t,index) in p.cards" v-bind:class="'card card' + t + '  row3'" v-if="index>13"
                         style="margin-left: -36px;"></div>
                </div>
            </div>
        </div>

        <!--  按钮提示  -->
        <div class="buttonAndCards">

            <div class="cardShow"
                 v-show="(player[0].account_status>3&&player[0].playing_status==1)||player[0].account_status==6">
                <a v-for="t in player[0].tempCards" v-bind:class="'card card' + t"></a>
                <a class="cardPass" v-show="player[0].tempCards.length==0">
                    <img src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/landlord/text_buyao.png"/>
                </a>
                <img src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/landlord/feiji3.png" class="feiji feiji1"/>
            </div>

            <!-- 按钮 -->
            <div class="buttonParts" v-show="timeOut==0">
                <div class="clock" v-show="player[0].playing_status==2||player[0].playing_status==3">
                    {{player[0].limit_time}}
                </div>

                <div class="landlordsPart" v-show="player[0].playing_status==2">
                    <div class="buttonType1" v-on:click="sendMessage(0,1)">
                        <img src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/landlord/button_buyao.png"/>
                    </div>
                    <div class="buttonType1" style="float: right" v-on:click="sendMessage(1,1)">
                        <img src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/landlord/button_yaodizhu.png"/>
                    </div>
                </div>

                <div class="operatePart" v-show="player[0].playing_status==3">
                    <div v-if="player[0].tips.length>0&&game.current_card_user!=player[0].account_id&&game.current_card_user!=-1">
                        <div class="buttonType2" v-on:click="sendMessage(0,2)">
                            <img src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/landlord/button_buchu.png"/>
                        </div>
                        <div class="buttonType2" style="margin-left: 2vh" v-on:click="noteCards">
                            <img src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/landlord/button_tishi.png"/>
                        </div>
                        <div class="buttonType2" style="margin-left: 2vh;" v-on:click="sendMessage(1,2)">
                            <img src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/landlord/button_chu.png"/>
                        </div>
                    </div>
                    <div v-if="player[0].tips.length==0&&game.current_card_user!=player[0].account_id">
                        <div class="buttonType2" v-on:click="sendMessage(0,2)" style="margin-left: 15.5vh;">
                            <img src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/landlord/button_pass.png"/>
                        </div>
                    </div>
                    <div v-if="game.current_card_user==player[0].account_id || game.current_card_user==-1">
                        <div class="buttonType2" style="margin-left: 17.3vh;" v-on:click="sendMessage(1,2)">
                            <img src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/landlord/button_chu.png"/>
                        </div>
                    </div>
                </div>

                <div class="readyPart"
                     v-show="player[0].account_status==1||player[0].account_status==0||player[0].account_status==2">
                    <div class="buttonType3"
                         v-show="(player[0].account_status==1||player[0].account_status==0)&&game.round==0"
                         v-on:click="imReady">
                        <img src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/landlord/button_ready.png"/>
                    </div>
                    <div class="buttonType3" v-show="player[0].account_status==2">
                        <img src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/common/ready_text.png" style="height: 3.5vh;"/>
                    </div>
                </div>
            </div>
        </div>

        <!--  我的手牌  -->
        <div class="myCards" id="myCards" style="height:0;" v-show="cardList.length>0">

            <div style="width:292px;height:0;padding-left:28px;margin-bottom: 92px;">
                <div style="float: right;">
                    <div v-for="c in cardList" class="cardItem myCard" v-bind:style="'z-index: ' + c.z_index +';'"
                         v-if="cardList.length>10&&c.num<(cardList.length-10)"
                         v-bind:class="{true: 'isSelect  myCard' + c.card, false: 'notSelect myCard' + c.card}[c.isSelect==true]"
                         v-show="c.num>=cardNumShow-10" v-bind:data-num="c.num">
                        <div v-bind:class="{true: 'isChoose', false: 'notChoose'}[c.isChoose]"></div>
                    </div>
                </div>
            </div>

            <!-- {true: 'isSelect', false: 'notSelect'}[c.isSelect] -->
            <div v-bind:style="'width: ' + (cardList.length>10?292:cardList.length*30) + 'px;height:0;padding-left:28px;margin: 0 auto;margin-top:18px;'">
                <div style="float: right;">
                    <div class="cardItem myCard" v-for="c in cardList" v-bind:style="'z-index: ' + c.z_index"
                         v-if="c.num>(cardList.length-11)"
                         v-bind:class="{true: 'isSelect myCard' + c.card, false: 'notSelect myCard' + c.card}[c.isSelect==true]"
                         v-show="c.num>=cardNumShow" v-bind:data-num="c.num">
                        <div v-bind:class="{true: 'isChoose', false: 'notChoose'}[c.isChoose==true]"></div>
                    </div>
                </div>
            </div>
            <div class="cardText">{{game.cardText}}</div>
        </div>


        <!--  消息  -->
        <div v-for="p in player">
            <div v-bind:class="'messageSay messageSay' + p.num" v-show="p.messageOn">
                <div class="text">{{p.messageText}}</div>
                <div class="triangle"></div>
            </div>
        </div>
    </div>

    <!--战绩榜-->
    <div class="ranking hideRanking" id="ranking" style="z-index: 1">
        <div class="rankBack">
            <img src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/bull/rank_bg.jpg" style="position: absolute;top: 0;left: 0;width: 100%">
        </div>

        <div class="rankText" style="position: absolute;top: 4%;">
            <img src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/landlord/rank_frame.jpg" style="position: absolute;top:0;left:0;width: 200vw;">
            <div class="time" v-show="playerBoard.round>0" style="position: absolute;top: 36vw;width: 100%;">
                <a style="font-size: 6vw;padding: 1vw 8vw;border-radius:6vw;background:#064943;border:2px solid #77ffe8;">房间号:{{globalData.roomNumber}}&nbsp&nbsp&nbsp&nbsp{{playerBoard.record}}&nbsp&nbsp&nbsp&nbsp{{game.total_num}}局</a>
            </div>
            <div style="height: 56vw;"></div>
            <div v-for="p in playerBoard.score" class="scoresItem" v-bind:class="{true: 'scoresItemYellow', false: 'scoresItemWhite'}[p.account_score>0]" v-show="p.account_id>0">
                <img src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/common/rank_bigwinner.png" style="top: 0; margin-top: -2.5vw; left: 4px;height: 120%" v-show="p.isBigWinner==1">
                <div class="name">{{p.nickname}}</div>
                <div class="currentScores"><a v-show="p.account_score>0">+</a>{{p.account_score}}</div>
            </div>
        </div>

        <div class="button roundEndShow" >
            <img src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/common/rank_save.png" style="float: left;margin-left: 13%;width: 30%" />
            <img src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/common/rank_review.png" style="float: right;margin-right: 13%;width: 30%" />
        </div>
    </div>
    <!-- 排行  -->
<!--    <div class="ranking hideRanking" id="ranking" style="z-index: 1">-->
<!--        <div class="rankBack">-->
<!--            <img crossOrigin="Anonymous" src="--><!--files/images/bull/rank_bg.jpg"-->
<!--                 style="position: absolute;top: 0;left: 0;width: 100%">-->
<!--        </div>-->
<!---->
<!--        <div class="rankText" style="position: absolute;top: 4%;">-->
<!--            <img  crossOrigin="Anonymous" src="--><!--files/images/nbull/rank_frame.png" style="position: absolute; top: .8rem; left: 23vw; width: 155vw; height: 9.5rem;">-->
<!--            <img crossorigin="Anonymous" src="--><!--files/images/nbull/jiesuan.png" style="position: absolute; top: 0.8rem; left: 1.6rem; width: 4rem;">-->
<!--            <div class="time" v-show="playerBoard.round>0" style="position: absolute;top: 74vw;width: 100%;">-->
<!--                <a style="border-color: #247ed8;background-color: #fff;font-size: 6vw;color:#000">房间号:{{globalData.roomNumber}}&nbsp&nbsp&nbsp&nbsp{{playerBoard.record}}&nbsp&nbsp&nbsp&nbsp{{game.total_num}}局</a>-->
<!--            </div>-->
<!--            <div style="height: 94vw;"></div>-->
<!--            <div v-for="p in playerBoard.score" class="scoresItem" v-bind:class="{true: 'scoresItemYellow', false: 'scoresItemWhite'}[p.account_score>0]" v-show="p.account_id>0" style="background-color:rgba(0,0,0,0.5);width:60%;border-radius:10px;border:2px solid #fff5c8;height: 11vw; line-height: 11vw;">-->
<!--                <img  crossOrigin="Anonymous" src="--><!--files/images/common/rank_bigwinner.png" style="top: 0; margin-top: -2.5vw; left: 4px;height: 120%" v-show="p.isBigWinner==1">-->
<!--                <div class="name" style="white-space: nowrap;left:10%;text-overflow: ellipsis;width: 55%;">{{p.nickname}}</div>-->
<!--                <div class="currentScores"><a v-show="p.account_score>0">+</a>{{p.account_score}}</div>-->
<!--            </div>-->
<!--        </div>-->
<!--        <div class="button roundEndShow" style="bottom:.8rem">-->
<!--            <img crossOrigin="Anonymous" src="--><!--files/images/common/rank_save.png"-->
<!--                 style="float: left;margin-left: 13%;width: 30%"/>-->
<!--            <img crossOrigin="Anonymous" src="--><!--files/images/common/datinganj.png"-->
<!--                 style="float: left;margin-left: 1%;width: 12%;margin-top: 2%;z-index:99"/>-->
<!--            <img crossOrigin="Anonymous" src="--><!--files/images/common/rank_review.png"-->
<!--                 style="float: right;margin-right: 13%;width: 30%"/>-->
<!--        </div>-->
<!--    </div>-->

    <!-- 游戏规则 -->
    <!--
    <div class="alert" id="vroomRule" v-show="isShowRull" v-on:click="closeRull">
        <div class="alertBack"></div>
        <img src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/guest/back.png"
             style="position: absolute; top: 1rem; width: 3rem; height: 3rem; left: .3rem;">
        <img src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/guest/yxgz.png"
             style="position: absolute; top: .8rem; width: 2rem; height: .7rem; left: .8rem;">
        <img src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/guest/cancel2.png"
             style="position: absolute; top: .8rem; width: .8rem; height: .8rem; right: .15rem;">
        <div style="position: absolute; top: .8rem; left: .03rem; color:#fff; font-size: 16px!important; padding: .65rem; opacity: .7;line-height: .3rem;">
            底分：
            <a v-if="rullInfo.base_score==1">1分</a>
            <a v-if="rullInfo.base_score==5">5分</a>
            <a v-if="rullInfo.base_score==10">10分</a><br>
            规则：
            <a v-if="rullInfo.ask_mode==1">轮流问地主</a>
            <a v-if="rullInfo.ask_mode==2">随机问地主</a><br>
            局数：
            <a v-if="rullInfo.ticket_count==1">6局X1张门票</a>
            <a v-if="rullInfo.ticket_count==2">12局X2张门票</a><br>
        </div>
    </div>
    -->

    <div class="createRoom" id="vroomRule" v-show="isShowRull" v-on:click="closeRull">
        <div class="createRoomBack"></div>
        <div class="mainPart">
            <div class="createB"></div>
            <div class="createTitle">
                <img src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/common/txt_rule.png"/>
            </div>
            <img src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/common/cancel.png" class="cancelCreate" v-on:click="closeRull"/>
            <div class="blueBack">
                <div class="selectPart" style="height:4vh;line-height:4vh;padding:0.8vh 0;">
                    <div class="selectTitle">底分：</div>
                    <div class="selectList">
                        <div class="selectItem" style="margin-left:10px;" v-if="rullInfo.base_score==1">
                            <div class="selectText">1分</div>
                        </div>
                        <div class="selectItem" style="margin-left:10px;" v-if="rullInfo.base_score==5">
                            <div class="selectText">5分</div>
                        </div>
                        <div class="selectItem" style="margin-left:10px;" v-if="rullInfo.base_score==10">
                            <div class="selectText">10分</div>
                        </div>
                    </div>
                </div>

                <div class="selectPart" style="height:4vh;line-height:4vh;padding:0.8vh 0;">
                    <div class="selectTitle">规则：</div>
                    <div class="selectList">
                        <div class="selectItem" style="margin-left:10px;" v-if="rullInfo.ask_mode==1">
                            <div class="selectText">轮流问地主</div>
                        </div>
                        <div class="selectItem" style="margin-left:10px;" v-if="rullInfo.ask_mode==2">
                            <div class="selectText">随机问地主</div>
                        </div>
                    </div>
                </div>

                <div class="selectPart" style="height:4vh;line-height:4vh;padding:0.8vh 0;">
                    <div class="selectTitle">局数：</div>
                    <div class="selectList">
                        <div class="selectItem" style="margin-left:10px;" v-if="rullInfo.ticket_count==1">
                            <div class="selectText">6局X1张门票</div>
                        </div>
                        <div class="selectItem" style="margin-left:10px;" v-if="rullInfo.ticket_count==2">
                            <div class="selectText">12局X2张门票</div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>


    <!-- 春天 -->
    <div class="spring" v-show="isShowSpring">
        <div class="springBack"></div>
        <div class="springMain">
            <img src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/landlord/spring.png" style="width: 100%;"/>
            <img class="springFall4" src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/landlord/spring3.png"/>
            <img class="springFall1" src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/landlord/spring1.png"/>
            <img class="springFall2" src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/landlord/spring2.png"/>
            <img class="springFall3" src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/landlord/spring1.png"/>
        </div>
    </div>

    <!-- 炸弹 -->
    <div class="bomb" v-show="isShowBomb">
        <img class="bomb1" src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/landlord/bomb1.png"/>
        <img class="bomb2" src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/landlord/bomb2.png"/>
        <img class="bomb3" src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/landlord/bomb3.png"/>
    </div>

    <!--  提示框  -->
    <div class="alert" v-show="isShowAlert">
        <div class="alertBack"></div>
        <div class="mainPart">
            <div class="backImg">
                <div class="blackImg"></div>
            </div>
            <div class="alertText">	<div>{{alertText}}</div>			                    <div v-if="alertType==8" style="font-size: 2.2vh">
                        <div>你还不是房主的好友,无法加入房间</div>
                        <div style="height: 6.6vh;">                  
                            <img v-bind:src="ownerUser.avatar" style="position: relative; width: 5vh;height: 5vh;border: .1vh solid yellow;top: .5vh;">
                            <span style="position: relative; font-size: 2.4vh;line-height: 6.6vh;height: 6.6vh;max-width: 43vw;top: -1.4vh;overflow: hidden;">{{ownerUser.nickname}}</span>

                        </div>
                    </div></div>
			    <div v-if="alertType==8" style="position: absolute;width:100%;line-height: 4.2vh;height: 4.2vh;width: 14vh;bottom: 11px;left:50%;margin-left:-7vh;text-align: center;overflow: hidden;">
                    <div v-show="applyStatus==0" style="border-radius: 2vh;background-color: #EE7942;color: #fff;font-size: 16px;"  v-on:click="applyToJoin">确定</div>
                    <div v-show="applyStatus==1" style="border-radius: 2vh;background-color: #6f6363;color: #fff;font-size: 16px;">申请中</div>
                </div>
            <div v-show="alertType==1">
                <div class="buttonMiddle" v-on:click="hall">返回大厅</div>
            </div>
            <div v-show="alertType==6">
                <div class="buttonMiddle" v-on:click="closeAlert">确定</div>
            </div>
            <div v-show="alertType==2">
                <div class="buttonMiddle" v-on:click="hall">创建房间</div>
            </div>
            <div v-show="alertType==3">
                <div class="buttonLeft" v-on:click="hall">返回大厅</div>
                <div class="buttonRight" v-on:click="closeAlert">取消</div>
            </div>
            <div v-show="alertType==4">
                <div class="buttonLeft" v-on:click="hall">创建房间</div>
                <div class="buttonRight" v-on:click="sitDown">加入游戏</div>
            </div>
            <div v-show="alertType==5">
                <div class="buttonMiddle" v-on:click="getCards">领取</div>
            </div>

            <div v-show="alertType==7">
                <div class="buttonMiddle" v-on:click="hall">返回大厅</div>
            </div>
            <div v-show="alertType==8">
            </div>
            <div v-show="alertType==9">
                <div class="buttonMiddle" v-on:click="closeAlert">确定</div>
            </div>

            <div v-show="alertType==11">
                <div class="buttonMiddle" v-on:click="closeAlert">知道了</div>
            </div>
            <div v-show="alertType==21">
                <div class="buttonMiddle" v-on:click="closeAlert">确定</div>
            </div>
            <div v-show="alertType==22">
                <div class="buttonMiddle" v-on:click="closeAlert">确定</div>
            </div>

            <div v-show="alertType==31">
                <div class="buttonMiddle" v-on:click="reloadView()">确定</div>
            </div>
            <div v-show="alertType==32">
                <div class="buttonMiddle" v-on:click="reloadView()">重新登录</div>
            </div>
        </div>
    </div>

    <div class="alertTip" v-show="isShowAlertTip">
        <div class="alertTipBG"></div>
        <img src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/common/alertTipOk.png" v-show="alertTipType==1">
        <img src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/common/alertTipWarn.png" v-show="alertTipType==2">
        <div class="alertTipText">{{alertTipText}}</div>
    </div>

    <!-- 消息-->
    <div class="message" v-show="isShowMessage" >
        <div class="messageBack" v-on:click="hideMessage"></div>
        <div class="textPartOuter"></div>
        <div id="message-box" class="textPart" v-bind:style="'height: ' + 0.39 * height + 'px;'">
            <!-- <div class="outline"></div> -->
            <div id="scroll-box" class="textList" style="width: 100%;">
                <div class="textItem" v-for="m in message" v-on:click="messageOn(m.num)">{{m.text}}</div>
                <!-- <div class="textItem" style="height: 5px;background: #434547;"></div> -->
            </div>
        </div>
    </div>


    <!-- end图片  -->
    <div id="endCreateRoom" class="end"
         style="position: fixed;width: 100%;height:100%;top:0;left:0;z-index: 120;display: none;">
        <img src="" style="width: 100vw;position: absolute;top:0;left: 0;height: 100vh;" id="end" usemap="#planetmap1"/>
        <div id="endCreateRoomBtn"
             style="position:fixed;right:13vw; width: 30vw; height: 10vw;bottom: .55rem;z-index:121;overflow: hidden;"
             v-on:click="reviewCard()"></div>
        <div id="endCreateRoomBtn"
             style="position:fixed;right:46vw; width: 10vw; height: 10vw;bottom: .45rem;z-index:121;overflow: hidden;"
             onclick="gotoHall()"></div>
    </div>

    <!-- 临时积分榜 -->
    <div class="roundPause1" id="roundPause1" style="z-index: 100;display: none;">
        <img crossOrigin="Anonymous" src="" style="width: 100%;position: absolute;top:0;left: 0;height: 100%;"
             id="roundPause2"/>
        <div class="mainPart">
            <div v-for="p in player" v-bind:class="'playerStatus playerStatus' + p.num">
                <img crossOrigin="Anonymous" src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/common/ready_text_tmp.png"
                     v-show="p.account_status==2"/>
                <img crossOrigin="Anonymous" src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/common/offline_text.png"
                     v-show="p.online_status==0"/>
            </div>
            <div class="release">三分钟未开局，房间自动解散<a>{{game.countdown}}s</a></div>
            <div class="button buttonRight" v-show="player[0].account_status!=2&&game.round!=game.total_num">
                <img crossOrigin="Anonymous" src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/common/button_next.png"/>
                <div class="text" v-on:click="newReady">下一局</div>
            </div>
        </div>
    </div>

    <div class="roundPause" id="roundPause" style="z-index:0;display: none;">
        <div class="lvBack"></div>
        <div class="mainPart">
            <img crossOrigin="Anonymous" src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/landlord/rank_frame2.png"
                 class="box">
            <div class="time"><a>{{playerBoard.record}}</a></div>
            <div class="infoPart">
                <div class="rule">
                    <div style="width: 15%;"></div>
                    <div style="width: 24%;text-align: left;overflow: hidden;">名称</div>
                    <div>总积分</div>
                    <div>本局积分</div>
                    <div>状态</div>
                </div>
                <div class="positionList" v-for="p in playerBoard.score"
                     v-bind:class="{true: 'scoresItemWin', false: 'scoresItemLose'}[p.account_score>0]">
                    <div style="width: 15%;"><img crossOrigin="Anonymous"
                                                  src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/common/rank_bigwinner.png"
                                                  v-if="game.maxWin==p.account_score"></div>
                    <div style="width: 24%;text-align: left;overflow: hidden;word-break: keep-all;white-space:nowrap; ">
                        {{p.nickname}}
                    </div>
                    <div>{{p.account_score}}</div>
                    <div>{{p.score_summary}}</div>
                    <div></div>
                </div>
            </div>
            <div class="button buttonLeft">
                <img crossOrigin="Anonymous" src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/common/button_changfa.png"/>
                <div class="text">长按发送</div>
            </div>
            <div class="button buttonRight" style="display: none;">
                <img crossOrigin="Anonymous" src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/common/button_jixu.png"/>
                <div class="text">继续</div>
            </div>
        </div>
        <img crossOrigin="Anonymous" src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/landlord/rank_landlord1.png"
             v-if="playerBoard.score[0].score_summary>0&&tempStatus==5" class="title"/>
        <img crossOrigin="Anonymous" src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/landlord/rank_landlord2.png"
             v-if="playerBoard.score[0].score_summary>0&&tempStatus==4" class="title"/>

        <img crossOrigin="Anonymous" src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/landlord/rank_landlord3.png"
             v-if="playerBoard.score[0].score_summary<0&&tempStatus==5" class="title"/>
        <img crossOrigin="Anonymous" src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/landlord/rank_landlord4.png"
             v-if="playerBoard.score[0].score_summary<0&&tempStatus==4" class="title"/>
    </div>

    <!-- 设置音频 -->
    <div class="audioRoom" id="vaudioRoom" v-show="editAudioInfo.isShow">
        <div class="audioRoomBack" v-on:click="cancelAudioSetting"></div>
        <div class="mainPart" >
            <div  class="createB"></div>
            <div class="createTitle" style="height:4vh;">
            </div>

            <img src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/common/cancel.png" class="cancelCreate" v-on:click="cancelAudioSetting"/>

            <div class="blueBack">
                <!--<div class="selectPart" style="top: 0px;height:4vh;line-height:4.1vh;">
                    <div class="selectTitle" style="width: 100%;font-size: 2vh; text-align: center;color: #7dd9ff; background-color: #143948;opacity: 1.0">点击确定后生效</div>
                </div>  -->
                <div style="height:0.5vh;"></div>

                <div class="selectPart" style="height:4vh;line-height:4vh;padding:0.8vh 0;">
                    <div class="selectTitle">背景音乐：</div>
                    <div class="selectList" >
                        <div class="selectItem" style="margin-left:10px;" v-on:click="setBackMusic" >
                            <div class="selectBox"></div>
                            <img src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/common/tick.png" v-show="editAudioInfo.backMusic==1"/>
                            <div class="selectText">开启</div>
                        </div>
                    </div>
                </div>

                <div class="selectPart" style="height:4vh;line-height:4vh;padding:0.8vh 0;">
                    <div class="selectTitle">游戏音效：</div>
                    <div class="selectList" >
                        <div class="selectItem" style="margin-left:10px;" v-on:click="setMessageMusic">
                            <div class="selectBox"></div>
                            <img src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/images/common/tick.png" v-show="editAudioInfo.messageMusic==1"/>
                            <div class="selectText">开启</div>
                        </div>
                    </div>
                </div>

                <div class="createCommit" v-on:click="confirmAudioSetting" >确定</div>

            </div>
        </div>
    </div>

</div>
<div class="outer" style="display: none;">

</div>
</body>

<script type="text/javascript" src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/js/canvas.js"></script>
<script src="https://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
<script type="text/javascript" src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/js/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/js/bscroll.js"></script>
<script type="text/javascript" src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/js/velocity.js"></script>
<script type="text/javascript" src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/js/vue.min.js"></script>
<script type="text/javascript" src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/js/vue-resource.min.js"></script>
<script type="text/javascript" src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/js/fuzhi_xl.js?v=22021"></script>

<!--fix landlord copy url-->
<script type="text/javascript" src="http://dsxds8.oss-cn-hangzhou.aliyuncs.com/feiying/commonxmz67/files/js/ds/landlord_2.js?v=b2212221221bb"></script>
<script type="text/javascript" src="./js/home_qrcode_game.js?v=202"></script>
<script type="text/javascript">
    document.addEventListener('WeixinJSBridgeReady', function onBridgeReady() {
        // 通过下面这个API隐藏右上角按钮
        WeixinJSBridge.call('hideOptionMenu');
    });
</script>
</html>
